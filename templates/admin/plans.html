{% extends "admin/base.html" %}

{% block title %}Gerenciar Planos{% endblock %}

{% block content %}
<h1>Gerenciar Planos de Serviço</h1>
<p>Adicione e configure os planos que seus usuários podem assinar.</p>

<h2>Planos Existentes</h2>
<table>
    <thead>
        <tr>
            <th>Nome</th>
            <th>Preço</th>
            <th>RAM</th>
            <th>vCore</th>
            <th>Disco</th>
            <th>Max Serviços</th>
            <th>Stripe Price ID</th>
        </tr>
    </thead>
    <tbody>
        {% for plan in plans %}
        <tr>
            <td>{{ plan.name }}</td>
            <td>R$ {{ "%.2f"|format(plan.price) }}</td>
            <td>{{ plan.ram_mb }} MB</td>
            <td>{{ plan.cpu_vcore }}</td>
            <td>{{ plan.disk_gb }} GB</td>
            <td>{{ plan.max_services }}</td>
            <td>{{ plan.stripe_price_id }}</td>
        </tr>
        {% else %}
        <tr>
            <td colspan="7">Nenhum plano encontrado. Crie um abaixo.</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<h2 style="margin-top: 2em;">Criar Novo Plano</h2>
<form action="/admin/plans" method="post">
    <input type="text" name="name" placeholder="Nome do Plano (ex: Free, Pro)" required>
    <input type="number" step="0.01" name="price" placeholder="Preço (ex: 0.00)" required>
    <input type="text" name="stripe_price_id" placeholder="Stripe Price ID (ex: price_...)" required>
    <input type="number" name="ram_mb" placeholder="RAM (MB)" required>
    <input type="number" step="0.1" name="cpu_vcore" placeholder="vCore (ex: 0.5)" required>
    <input type="number" name="disk_gb" placeholder="Disco (GB)" required>
    <input type="number" name="max_services" placeholder="Máximo de Serviços" required>
    <button type="submit" class="btn">Criar Plano</button>
</form>
{% endblock %}